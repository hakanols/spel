<!DOCTYPE html>
<html>
	<head>
		<title>SPELET KOMMER</title>
		<script type="module">
			let maxNumber = 10;
			const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString)
            if (urlParams.has('count')){
                maxNumber = parseInt(urlParams.get('count'),10)
            }
			const number1 = Math.floor(Math.random() * (maxNumber+1))
			const number2 = Math.floor(Math.random() * (maxNumber+1))

			const question = document.getElementById("Question")
			const buttons = document.getElementById("Buttons")
			const trophy = document.getElementById("Trophy")

			window.hello = function(){
				document.getElementById("myForm").submit();
			}

			function handleClick(element, number){
				if (element.style.background != ""){
					console.log("Ignore")
					return
				}
				if (number == number1+number2){
					element.style.background = "blue";
					let img = document.createElement("img");
					img.src = "pokal.svg";
					img.style = "height:300px;width:280px"
					trophy.appendChild(document.createElement("br"))
					trophy.appendChild(img);
				}
				else {
					element.style.background = "red";
				}
			}

			question.innerText = number1+" + "+number2+" = ?"
			for (let number of Array(maxNumber*2+1).keys()){
				let btn = document.createElement("button");
				btn.innerHTML = "<h1>"+number+"</h1>";
				btn.style = "height:80px;width:80px"
				btn.onclick = function() {
					handleClick(btn, number)
				}
				buttons.appendChild(btn);

				if ((number+1) % 7 == 0) {
					buttons.appendChild(document.createElement("br"))
				}
			}
		</script>
	</head>
	<body>
		<h1>SPELET KOMMER</h1>
		<form id="myForm">
			<input type="radio" id="easy" name="count" value="3" onclick="hello();">
			<label for="easy">Easy</label>
			<input type="radio" id="moderate " name="count" value="10" onclick="hello();">
			<label for="moderate">Moderate </label>
			<input type="radio" id="hard" name="count" value="17" onclick="hello();">
			<label for="hard">Hard</label>
			<input type="radio" id="super" name="count" value="31" onclick="hello();">
			<label for="super">Super</label>
		</form>
		<table style="width:560px""><tr>
			<td width="99%">
				<h1 id="Question"></h1>
			</td>
			<td>
				<button onclick="location.reload()" style="height:40px;width:160px">Hejduk</button>
			</td>
		</tr></table>
		<div id="Buttons"></div>
		<div id="Trophy"></div>
		<p>av: Hjalmar och HÃ¥kan</p>
	</body>
</html>
