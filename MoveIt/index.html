<!DOCTYPE html>
<html>
<head>
    <title>Move test</title>
    <style>
        canvas {
            border:1px solid #d3d3d3;
            background-color: #f1f1f1;
        }
    </style>
    <script type="module">
        const squarWidth = 40;
        const squarHeight = 40;
        const squarColor = "red";
        const squarStartX = squarWidth/2;
        const squarStartY = squarHeight/2;

        const canvas = document.createElement("canvas");
        canvas.width = 300;
        canvas.height = 300;
        
        window.startGame = function() {
            let context = canvas.getContext("2d");
            document.body.insertBefore(canvas, document.body.childNodes[0]);
            let x = squarStartX
            let y = squarStartY

            const update = function(newX , newY){
                x = newX
                y = newY
                context.clearRect(0, 0, canvas.width, canvas.height);
                context.fillStyle = squarColor;
                context.fillRect(newX-squarWidth/2, newY-squarHeight/2, squarWidth, squarHeight);
            }
            update(squarStartX , squarStartY)

            window.addEventListener('mousedown', function (e) { // 'mouseup'
                update(e.pageX-10, e.pageY-10)
            })
            window.addEventListener('touchstart', function (e) { // 'touchend'
                update(e.pageX-10, e.pageY-10)
            })
            window.addEventListener('keyup', (event) => {
                switch (event.key) {
                    case 'ArrowLeft':
                        update(x-5, y)
                        break;
                    case 'ArrowRight':
                        update(x+5, y)
                        break;
                    case 'ArrowUp':
                        update(x, y-5)
                        break;
                    case 'ArrowDown':
                        update(x, y+5)
                        break;
                    default:
                        alert("Only Arrow Keys Are Allowed!");
                }
            });
        }
    </script>
</head>
<body onload="startGame()">
    <p>Move the red square with your finger, mouse or arrow keys.</p>
</body>
</html>