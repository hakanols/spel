<!DOCTYPE html>
<!--// Stolen from https://www.w3schools.com/graphics/tryit.asp?filename=trycanvas_clock_start-->
<html>
  <head>
    <meta name="viewport" content="width=700, initial-scale=1.0">
	  <script type="module">
      const realClockEl = document.getElementById('real_clock');
      const customClockEl = document.getElementById('custom_clock');
      const customTimeEl = document.getElementById('custom_time');
      
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      let radius = canvas.height / 2;
      ctx.translate(radius, radius);
      radius = radius * 0.90

      let tickGenerator

      function realTimeTick(){
        const now = new Date();
        drawClock(now)
      }

      function drawClock(time) {
        drawFace(ctx, radius);
        drawNumbers(ctx, radius);
        drawTime(ctx, radius, time);
      }
      
      function drawFace(ctx, radius) {
        const grad = ctx.createRadialGradient(0,0,radius*0.95, 0,0,radius*1.05);
        grad.addColorStop(0, '#333');
        grad.addColorStop(0.5, 'white');
        grad.addColorStop(1, '#333');
        ctx.beginPath();
        ctx.arc(0, 0, radius, 0, 2*Math.PI);
        ctx.fillStyle = 'white';
        ctx.fill();
        ctx.strokeStyle = grad;
        ctx.lineWidth = radius*0.1;
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(0, 0, radius*0.1, 0, 2*Math.PI);
        ctx.fillStyle = '#333';
        ctx.fill();
        for(let num = 1; num <= 60; num++){
            let ang = num * Math.PI*2 / 60;
            ctx.beginPath();
            ctx.lineWidth = radius*0.02;
            let x = Math.sin(ang)*radius
            let y = -Math.cos(ang)*radius
            ctx.moveTo(x*0.85,y*0.85);
            ctx.lineTo(x*0.90,y*0.90);
            ctx.stroke();
        }
      }
      
      function drawNumbers(ctx, radius) {
        ctx.font = radius*0.15 + "px arial";
        ctx.textBaseline="middle";
        ctx.textAlign="center";
        for(let num = 1; num <= 12; num++){
          let ang = num * Math.PI*2 / 12;
          let x = Math.sin(ang)*radius*0.75
          let y = -Math.cos(ang)*radius*0.75
          ctx.fillText(num.toString(), x, y);
        }
      }
      
      function drawTime(ctx, radius, time){
          let secondAng = time.getSeconds()*Math.PI/30;
          drawHand(ctx, secondAng, radius*0.8, radius*0.02);

          let minuteAng = time.getMinutes()*Math.PI/30 + secondAng/60;
          drawHand(ctx, minuteAng, radius*0.8, radius*0.07);

          let hourAng = (time.getHours()%12)*Math.PI/6 + minuteAng/60;
          drawHand(ctx, hourAng, radius*0.5, radius*0.07);
      }
      
      function drawHand(ctx, ang, length, width) {
          ctx.beginPath();
          ctx.lineWidth = width;
          ctx.lineCap = "round";
          ctx.moveTo(0,0);
          let x = Math.sin(ang)*length
          let y = -Math.cos(ang)*length
          ctx.lineTo(x, y);
          ctx.stroke();
      }

      function getCustomTime(){
        const timeArray = customTimeEl.value.split(":")
        let date = new Date()
        date.setHours(timeArray[0]);
        date.setMinutes(timeArray[1]);
        date.setSeconds("00");
        return date
      }

      window.setCustomSource = function() {
        clearInterval(tickGenerator);
        customClockEl.checked="checked"
        drawClock(getCustomTime())
      }

      window.setRealSource = function() {
        realTimeTick()
        tickGenerator = setInterval(realTimeTick, 1000);
        realClockEl.checked="checked"
      }

      customTimeEl.value = "12:00"
      window.setRealSource()

    </script>
  </head>
  <body>
    <canvas id="canvas" width="400" height="400" style="background-color:#333">
    Sorry, your browser does not support canvas.
    </canvas>
    <br>
    <input name="sourceSelect" type="radio" onclick="setRealSource()" id="real_clock">
    Real time
    <br>
    <input name="sourceSelect" type="radio" onclick="setCustomSource()" id="custom_clock">
    Custom time: 
    <input type="time" id="custom_time" oninput="setCustomSource()">
  </body>
</html>
